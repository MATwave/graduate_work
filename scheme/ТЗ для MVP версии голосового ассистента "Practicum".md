### Список терминов

 * Online кинотеатр "Practicum" - основной сайт со списком фильмом. В дальнейшем "**Кинотеатр**";
 * Голосовой ассистент - реализуемый в рамках данного технического задания голосовой ассистент, который будет работать с данными из кинотеатра "Practicum" кинотеатра. В дальнейшем "**ассистент**".

### Цель

Целью разработки голосового ассистена для online кинотеатра "Practicum" является:
* Рекомендация пользователям фильмов;
* Интгерация с голосовым помощником Алиса(Яндекс), Маруся(ВК); 

### Функциональные требования

#### 1. **Целевая аудитория.**

Основыми пользователями ассистента будут являться жители **России**.

#### 2. **Основная платформа для ассистента.**

Ассистент должен быть реализован на базе голосового онлайн помощника от компаний Яндекс и ВК. При реализации ассистенат нужно заложить возможность для масштабирования функционала под другие платформы, например, такие, как  **Siri**.

#### 3. **Функции ассистента.**

Голосовой ассистент должен уметь реализовывать следующие функции:

1. Рекомендация фильма по наивысшим рейтингам;
2. Сообщать пользователю информацию о рекомендованном фильме;
3. Рекомендовать фильмы в таком же жанре;
4. Корректно завершать работу реагирую на фразу "Спасибо";
5. Продалжать работу в случае не корректной голосовой команды;

#### 4. **Сценарии использования ассистента.**

В дальнейшем будут использоваться сокращения для Пользователя(П) и Ассистента(А). Для удобства обращаться будем к Алисе(Яндекс)

##### 1. Рекомендация фильма

*П: Алиса, посоветуй фильм?
А: Карты деньги два ствола.


##### 2. Информация об жанре фильма(из контекста найденного фильма)

*П: Алиса, какой жанр у этого фильма? 
А: Боевик, комедия, криминал

##### 3. Информация о фильма(из контекста найденного фильма)

*П: Алиса, о чем этот фильм?
А: Фильма прот карты деньги и два ствола. (Информация из описания фильма)

##### 4. Информация об актерах (из контекста найденного фильма)

*П: Алиса, кто снялся в фильме?*
*А: Джейсон Стетхем, и пр(Из списка главных актеров фильма)*

##### 5. Рекомендация фильма в таком же жанре (из контекста найденного фильма)

Далее возможны два варианта. Пользователь **хочет** посмотреть фильм.

*П: Алиса, посоветуй фильм в таком же жанре.
А: Большой куш (После этого пользователь может повтороно задавать ворпосы по пунктам 1-4)*

##### 6. Не типовые запросы.

*П: Алиса, где сидит фазан?
А: Извините я не знаю как Вам помочь. Попробуйте еще раз!

##### 7. Корректное завершение работы.
*П: Алиса, спасибо.
А: Рада помочь!



### Не функциональные требования и ограничения.

Ниже описанные требования являются обязательными при реализации MVP версии и для дальнейшего развития голосового ассистента. Пересмотр параметров возможен в процессе развития ассистента.

| Требование                                            | Значение                                                        | Обоснование                                                                                   |
| ----------------------------------------------------- | --------------------------------------------------------------- | --------------------------------------------------------------------------------------------- |
| Скорость ответа на первый вопрос                      | 2 сек                                                           | Скорость ответа не должна быть больше, чем у других асистентов на рынке(Маруся, Siri, Алекса) |
| Скорость ответа на последующий связанный вопрос       | 1 сек                                                           | Так хочет заказчик                                                                            |
| Доступ к асистенту                                    | Только для зарегистрированных на сайте кинотеатра пользователей | Планируются Ноу-хау для повышения популярности кинотеатра                                     |
| Возможность отключить функцию на поиска по кинотеатру | Да                                                              | Повышение лояльности пользователей                                                            |
| Защита персоональных данных                           | Да                                                              | Требование ФЗ 152                                                                             |
| Доступность асистента                                 | 99,9%                                                           | Снижение рипутационных рисков                                                                 |
| Решение инцидентов. Время первой реакции              | 15 мин                                                          | Снижение рипутационных рисков                                                                 |
| Решение инцидентов. Полное устранение инцидента       | 3 часа                                                          | Снижение рипутационных рисков                                                                 |
| Уровень серивса по технической поддержке(SLA)         | >95%                                                            | Снижение рипутационных рисков                                                                                               |

### Стек технологий
Тут будет обоснование выбора решений

### Схема компонентов


![Схема компонентов](https://dub02pap001files.storage.live.com/y4mllDvbceo9YM1nBvPUWUOqCkbyw9jt_YXcozPQYuAV9uwudpCVAWN1ZO0vjue_8rYdMGkpfzZMQw28b8gb8t4wbAcuDmN-TVRxtKsWYCSqF8ePw3IhWjN205uBEGDTBG10hs5D_IcY5aVV9LKcfc3SMytYx4r0HhsOZEVTXQqaRaZ2B8Z3fLFu4zpuMO43K0K?encodeFailures=1&width=608&height=527)

### Модели данных

#### 1. Физическая модель БД
Тут будет ER диаграмма схемы БД 
пока для примера взята схема с 1 модуля (ETL)
![ER диаграмма БД](https://dub02pap001files.storage.live.com/y4mA42EFJjK9UPZK1EQfakVbwNCZFwDFAEE0rMezDpNPzRO7H949hU6aB9H2niQoj0g-acPWs8rDp6w6fu803eICYBpEi3zqcWoJwHO5w1c2jweIq6lFWxO47cKLGn-U125P-0x5SlC5b19FoxKHypsmp57eSGE9E2kw1Jpd2tWcvKkUYIbG5TqZ-UlO6BEu538?encodeFailures=1&width=726&height=565)

#### 2. Модель индекса ES
Тут будет схема индекса ES пока для примера взята схема с 1 модуля (ETL)
```json
{
  "settings": {
    "refresh_interval": "1s",
    "analysis": {
      "filter": {
        "english_stop": {
          "type": "stop",
          "stopwords":  "_english_"
        },
        "english_stemmer": {
          "type": "stemmer",
          "language": "english"
        },
        "english_possessive_stemmer": {
          "type": "stemmer",
          "language": "possessive_english"
        },

        "russian_stop": {
          "type": "stop",
          "stopwords":  "_russian_"
        },
        "russian_stemmer": {
          "type": "stemmer",
          "language": "russian"
        }
      },
      "analyzer": {
        "ru_en": {
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "english_stop",
            "english_stemmer",
            "english_possessive_stemmer",
            "russian_stop",
            "russian_stemmer"
          ]
        }
      }
    }
  },
  "mappings": {
    "dynamic": "strict",
    "properties": {
      "id": {
        "type": "keyword"
      },
      "imdb_rating": {
        "type": "float"
      },
      "genre": {
        "type": "keyword"
      },
      "title": {
        "type": "text",
        "analyzer": "ru_en",
        "fields": {
          "raw": { 
            "type":  "keyword"
          }
        }
      },
      "description": {
        "type": "text",
        "analyzer": "ru_en"
      },
      "director": {
        "type": "text",
        "analyzer": "ru_en"
      },
      "actors_names": {
        "type": "text",
        "analyzer": "ru_en"
      },
      "writers_names": {
        "type": "text",
        "analyzer": "ru_en"
      },
      "actors": {
        "type": "nested",
        "dynamic": "strict",
        "properties": {
          "id": {
            "type": "keyword"
          },
          "name": {
            "type": "text",
            "analyzer": "ru_en"
          }
        }
      },
      "writers": {
        "type": "nested",
        "dynamic": "strict",
        "properties": {
          "id": {
            "type": "keyword"
          },
          "name": {
            "type": "text",
            "analyzer": "ru_en"
          }
        }
      }
    }
  }
}
```
